---
---

<section class="get-in-touch">
  <h1 class="title">Get in touch</h1>
  <p class="note subtitle">
    Have a question? We'd love to hear from you. Send us a message and
    we'll respond as soon as possible.
  </p>
  
  <div id="feedback-msg" class="notification" style="display: none;">
    <p id="feedback-text"></p>
  </div>
  
  <form
    name="contact"
    class="contact-form-styles contact-row"
    method="post"
    id="contact-form"
  >
    <div class="field">
      <div class="form-field col x-50">
        <input
          class="input-text js-input"
          type="text"
          name="name"
          id="name"
          required
          placeholder="Name"
        />
      </div>
    </div>
    <div class="field">
      <div class="form-field col x-50">
        <input
          class="input-text js-input"
          type="email"
          name="email"
          id="email"
          required
          placeholder="Email"
        />
      </div>
    </div>
    <div class="field">
      <div class="form-field col x-100">
        <textarea
          class="input-text js-input"
          name="message"
          id="message"
          required
          placeholder="Message"
          rows="5"
        ></textarea>
      </div>
    </div>
    <div class="form-field submit col x-100 align-center">
      <button 
        class="btn btn-outline-primary contact-btn" 
        type="submit"
        id="submit-btn"
      >
        Send
      </button>
    </div>
  </form>
  
  <p class="note">
    Powered by{' '}
    <a
      class="link"
      href="https://www.staticforms.xyz"
      target="_blank"
      rel="noopener noreferrer"
    >
      StaticForms.xyz
    </a>
    .{' '}
    The information you submit in this form <u>is not stored</u>, per{' '}
    <a
      href="https://www.staticforms.xyz/privacy"
      target="_blank"
      rel="noopener noreferrer"
    >
      Static Forms' Privacy Policy
    </a>
    . It is directly forwarded to our email.
  </p>
</section>

<script>
  const form = document.getElementById('contact-form');
  const feedbackMsg = document.getElementById('feedback-msg');
  const feedbackText = document.getElementById('feedback-text');
  const submitBtn = document.getElementById('submit-btn');
  
  if (form) {
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      submitBtn.disabled = true;
      submitBtn.textContent = 'Sending...';
      
      feedbackMsg.style.display = 'none';
      feedbackMsg.classList.remove('is-primary', 'is-danger');
      
      const formData = new FormData();
      formData.append('apiKey', import.meta.env.PUBLIC_STATICFORMS_API_KEY || '');
      const nameInput = document.getElementById('name');
      const emailInput = document.getElementById('email');
      const messageInput = document.getElementById('message');
      
      if (!nameInput || !emailInput || !messageInput) {
        return;
      }
      
      formData.append('name', nameInput.value);
      formData.append('email', emailInput.value);
      formData.append('message', messageInput.value);
      formData.append('subject', 'New Contact Form Submission');
      formData.append('replyTo', emailInput.value);
      
      const redirectUrl = import.meta.env.PUBLIC_STATICFORMS_REDIRECT_URL || '/success';
      if (redirectUrl) {
        formData.append('redirectTo', redirectUrl);
      }
      
      try {
        const response = await fetch('https://api.staticforms.dev/submit', {
          method: 'POST',
          body: formData,
        });
        
        const data = await response.json();
        
        if (response.ok && data.success) {
          feedbackText.textContent = 'Message sent successfully! We\'ll get back to you soon.';
          feedbackMsg.classList.add('is-primary');
          feedbackMsg.style.display = 'block';
          
          form.reset();
          
          if (redirectUrl && redirectUrl !== window.location.pathname) {
            setTimeout(() => {
              window.location.href = redirectUrl;
            }, 1500);
          }
        } else {
          feedbackText.textContent = data.message || 'Error sending message. Please try again later.';
          feedbackMsg.classList.add('is-danger');
          feedbackMsg.style.display = 'block';
        }
      } catch (error) {
        feedbackText.textContent = 'An unexpected error occurred. Please try again later.';
        feedbackMsg.classList.add('is-danger');
        feedbackMsg.style.display = 'block';
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = 'Send';
      }
    });
  }
</script>

<style>
  .align-center {
    text-align: center;
  }

  .subtitle {
    padding: 1.5rem 0 2.5rem;
  }

  input:focus label {
    color: transparent;
  }

  .notification {
    padding: 1.5rem 2rem;
    border-radius: 5px;
    display: inline-block;
    margin-bottom: 0.5rem;
    width: 100%;
    box-sizing: border-box;
  }

  .notification p {
    line-height: 1.5;
    margin-bottom: 0;
  }

  /* Grid */
  .contact-row {
    margin: -20px 0;
  }

  .contact-row .col {
    padding: 0 20px;
    float: left;
    box-sizing: border-box;
  }

  .contact-row .col.x-50 {
    width: 50%;
  }

  .contact-row .col.x-100 {
    width: 100%;
  }

  @media only screen and (max-width: 576px) {
    .contact-row .col.x-50 {
      width: 100%;
    }
  }

  @media only screen and (max-width: 398px) {
    .contact-row {
      padding: 0 5vw;
      display: block;
    }
  }

  .get-in-touch {
    max-width: 650px;
    margin: 5rem auto;
    position: relative;
    display: block;
    font-family: var(--ff-primary), sans-serif;
  }

  .title {
    text-align: center;
    font-family: var(--ff-primary), sans-serif;
    text-transform: uppercase;
    letter-spacing: 3px;
    font-size: 36px;
    line-height: 48px;
  }

  .contact-form-styles .form-field {
    position: relative;
    margin: 32px 0;
  }

  .contact-form-styles .input-text {
    display: block;
    width: 100%;
    height: 36px;
    border-width: 0 0 2px 0;
    border-radius: 0px;
    border-color: var(--primary-6);
    font-family: var(--ff-primary), sans-serif;
    font-size: 18px;
    line-height: 26px;
    font-weight: 400;
    background-color: transparent;
  }

  .contact-form-styles .input-text:focus {
    outline: none;
  }

  .contact-form-styles textarea.input-text {
    height: auto;
    min-height: 120px;
    resize: vertical;
  }

  .contact-form-styles .label {
    position: absolute;
    left: 20px;
    bottom: 11px;
    font-size: 18px;
    line-height: 26px;
    font-weight: 400;
    color: #7e7e7e;
    cursor: text;
    transition: transform 0.2s ease-in-out;
  }

  .note {
    width: 100%;
    text-align: center;
    line-height: 21px;
    font-size: 1.125em;
  }

  @media only screen and (max-width: 690px) {
    .note {
      padding: 0 5vw;
    }

    .subtitle {
      margin: 1rem auto 1.3rem;
    }
  }

  .contact-btn {
    padding: 1rem 2rem;
  }

  .contact-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  @media only screen and (max-width: 767px) {
    .submit {
      margin-bottom: 3rem !important;
    }
  }

  .is-danger {
    background-color: #f14668;
    border-color: transparent;
  }

  .is-danger p {
    color: #fff !important;
  }

  .is-primary {
    background-color: #48c78e;
    border-color: transparent;
  }

  .is-primary p {
    color: #fff !important;
  }
</style>
